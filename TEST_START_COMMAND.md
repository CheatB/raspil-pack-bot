# Тест команды /start

## Запуск теста

После каждого изменения кода необходимо запустить тест для команды `/start`:

```bash
cd /var/www/projects/emoji_bot
pnpm -C apps/web test:start
```

Или из корня проекта:

```bash
pnpm -C apps/web test start-command.test.ts
```

## Что проверяет тест

1. **Структура обновления**: Проверяет, что команда `/start` имеет правильную структуру сообщения
2. **Обработка через webhook**: Проверяет, что webhook может обработать команду `/start`
3. **Команда с параметрами**: Проверяет обработку команды `/start` с параметрами
4. **Интеграционный тест**: Проверяет реальный запрос к API endpoint

## Если тест не проходит

1. Проверьте логи: `pm2 logs emoji_bot_web`
2. Проверьте, что бот инициализирован: в логах должно быть "Initializing bot..."
3. Проверьте, что команды зарегистрированы: в логах должно быть "Registering commands..."
4. Проверьте переменные окружения: `pm2 env 0 | grep TG_BOT_TOKEN`

## Важно

- Тест должен проходить **каждый раз** после изменения кода
- Если тест не проходит, команда `/start` не будет работать в боте
- Все тесты должны проходить перед деплоем


